/**
 * =============================================================================
 * Auto-Generated Playwright Test
 * =============================================================================
 * 
 * Story:     TI-1
 * Scenario:  Validation of empty email field
 * ID:        TS-003
 * Generated: 2026-02-13T10:05:34.606637+00:00
 * Generator: Jira QA AI Generator (Agentic Pipeline)
 * 
 * Pipeline:  Story → AC → Scenarios → AutomationEngineer → CodeReviewer → GitOps
 * Review:    Score 5/10
 * 
 * ⚠️  This file was automatically generated by the AI agentic pipeline.
 *     Manual modifications may be overwritten on regeneration.
 * =============================================================================
 */

import { test, expect } from '@playwright/test';

test('Validation of empty email field', async ({ page }) => {
  // Navigate to the login page
  await page.goto('/');

  // Step: Leave the email field empty
  // We target the email input and ensure it is empty
  const emailField = page.locator('input[type="email"], [name="email"], [placeholder*="Email"]');
  await emailField.fill('');

  // Step: enter a password
  const passwordField = page.locator('input[type="password"], [name="password"], [placeholder*="Password"]');
  await passwordField.fill('TestPassword123!');

  // Step: and click login
  const loginButton = page.locator('button[type="submit"], text=/Log in|Sign in/i');
  await loginButton.click();

  // Expect: Validation error message for the missing email field is displayed.
  // This checks for either a visible UI error message or browser-level HTML5 validation
  const errorMessage = page.locator('text=/required|empty|email/i');
  
  // Check if a specific error message appears in the DOM
  const isErrorVisible = await errorMessage.first().isVisible();
  
  if (isErrorVisible) {
    await expect(errorMessage.first()).toBeVisible();
  } else {
    // Fallback: Check for HTML5 validation message if no UI element is found
    const validationMessage = await emailField.evaluate((el: HTMLInputElement) => el.validationMessage);
    expect(validationMessage).not.toBe('');
  }
});

/**
 * =============================================================================
 * Auto-Generated Playwright Test
 * =============================================================================
 * 
 * Story:     TI-1
 * Scenario:  Automatic redirection after login
 * ID:        TS-004
 * Generated: 2026-02-13T10:05:34.611463+00:00
 * Generator: Jira QA AI Generator (Agentic Pipeline)
 * 
 * Pipeline:  Story → AC → Scenarios → AutomationEngineer → CodeReviewer → GitOps
 * Review:    Score 9/10
 * 
 * ⚠️  This file was automatically generated by the AI agentic pipeline.
 *     Manual modifications may be overwritten on regeneration.
 * =============================================================================
 */

import { test, expect } from '@playwright/test';

test('Automatic redirection after login', async ({ page }) => {
  // 1. Access 'https://site.com/profile' directly.
  // Expected: User is redirected to the login page.
  await page.goto('https://site.com/profile');
  
  // Verify redirection to login page (URL should contain 'login')
  await expect(page).toHaveURL(/.*login.*/);

  // 2. Enter valid credentials and click login.
  // Using name-based locators as specific IDs or Labels were not provided in context.
  await page.locator('input[name="username"]').fill('validUser');
  await page.locator('input[name="password"]').fill('validPassword');
  
  // Using getByRole for the button is more robust than a generic CSS selector.
  await page.getByRole('button', { name: /log in|submit/i }).click();

  // 3. Verify user is authenticated and redirected back to 'https://site.com/profile'.
  // Playwright's toHaveURL will poll until the condition is met or timeout occurs.
  await expect(page).toHaveURL('https://site.com/profile');
});
